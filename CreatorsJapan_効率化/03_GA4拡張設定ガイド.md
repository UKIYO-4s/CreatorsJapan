# GA4 拡張設定ガイド

## 目的

GA4の標準計測に加え、カスタムイベントを追加することで、より詳細なユーザー行動分析を可能にする。

---

## 現状のGA4計測（標準）

GA4がデフォルトで取得しているデータ：

| カテゴリ | 指標 |
|----------|------|
| 基本 | PV、ユーザー数、セッション数 |
| エンゲージメント | 滞在時間、直帰率 |
| 流入元 | 参照元/メディア |
| デバイス | デバイスカテゴリ |
| 地域 | 国、都市 |

**課題**: これだけでは「ユーザーが実際に何をしたか」が分からない

---

## 追加推奨カスタムイベント

### 1. スクロール深度（scroll_depth）

**目的**: 記事がどこまで読まれているか把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| percent | 25, 50, 75, 90 | 到達深度 |
| page_path | /article/xxx | 対象ページ |

**分析例**:
- 記事Aは90%到達率が高い → 最後まで読まれている
- 記事Bは25%で離脱が多い → 冒頭で興味を失っている

**GTM設定**:
```javascript
// トリガー: Scroll Depth
// 閾値: 25, 50, 75, 90
// イベント名: scroll_depth
// パラメータ:
//   - percent: {{Scroll Depth Threshold}}
//   - page_path: {{Page Path}}
```

---

### 2. CTAクリック（cta_click）

**目的**: どのボタン・リンクがクリックされているか把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| cta_name | 無料相談, 資料DL, 詳細を見る | CTAの識別 |
| cta_location | header, sidebar, article_end | 配置場所 |
| page_path | /article/xxx | クリック元ページ |

**分析例**:
- ヘッダーのCTAより記事末尾のCTAの方がクリック率高い
- 「無料相談」より「資料ダウンロード」の方が反応が良い

**GTM設定**:
```javascript
// トリガー: Click - All Elements
// 条件: data-cta属性を持つ要素
// イベント名: cta_click
// パラメータ:
//   - cta_name: {{Click Element - data-cta-name}}
//   - cta_location: {{Click Element - data-cta-location}}
//   - page_path: {{Page Path}}
```

**HTML実装例**:
```html
<a href="/contact"
   class="btn"
   data-cta-name="無料相談"
   data-cta-location="header">
  無料相談はこちら
</a>
```

---

### 3. 動画視聴（video_engagement）

**目的**: 埋め込み動画の視聴状況を把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| video_title | 動画編集入門 | 動画識別 |
| video_action | play, pause, complete | 操作種別 |
| video_percent | 25, 50, 75, 100 | 視聴進捗 |
| video_duration | 180 | 動画の長さ（秒） |

**分析例**:
- 動画Aは50%で離脱が多い → 中盤で飽きている
- 動画Bは完了率90% → 最後まで見られている

**GTM設定**:
```javascript
// YouTube動画の場合
// トリガー: YouTube Video
// イベント名: video_engagement
// パラメータ:
//   - video_title: {{Video Title}}
//   - video_action: {{Video Status}}
//   - video_percent: {{Video Percent}}
```

---

### 4. 外部リンククリック（outbound_link）

**目的**: どの外部サイトへ離脱しているか把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| link_url | https://example.com | リンク先URL |
| link_domain | example.com | リンク先ドメイン |
| link_text | 詳しくはこちら | リンクテキスト |
| page_path | /article/xxx | クリック元ページ |

**分析例**:
- アフィリエイトリンクのクリック数を把握
- どの記事から外部誘導が多いか分析

**GTM設定**:
```javascript
// トリガー: Click - Just Links
// 条件: Click URL does not contain creators-jp.com
// イベント名: outbound_link
// パラメータ:
//   - link_url: {{Click URL}}
//   - link_domain: {{Click URL Hostname}}
//   - link_text: {{Click Text}}
```

---

### 5. 精密滞在時間（time_on_page）

**目的**: 実際にアクティブに閲覧している時間を把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| time_bucket | 30s, 1m, 3m, 5m, 10m | 滞在時間帯 |
| page_path | /article/xxx | 対象ページ |

**GA4標準の課題**:
- GA4の滞在時間は「次のページに移動するまでの時間」
- タブを開いたまま放置も滞在時間にカウントされる

**分析例**:
- 記事Aは5分以上滞在が多い → じっくり読まれている
- 記事Bは30秒未満が多い → 内容が薄い or ミスマッチ

**GTM設定**:
```javascript
// トリガー: Timer
// インターバル: 30000ms（30秒ごと）
// イベント名: time_on_page
// パラメータ:
//   - seconds: {{Timer Interval Count}} * 30
//   - page_path: {{Page Path}}
```

---

### 6. 記事読了（article_read）

**目的**: 記事を最後まで読んだユーザーを把握

| パラメータ | 値 | 用途 |
|------------|-----|------|
| article_title | 動画編集の始め方 | 記事タイトル |
| article_category | 入門, テクニック | カテゴリ |
| word_count | 3500 | 文字数 |
| read_time | 180 | 読了までの秒数 |

**発火条件**: スクロール90%到達 AND 滞在時間1分以上

**分析例**:
- 読了率の高い記事の特徴を分析
- 会員登録につながる記事を特定

---

## 会員サイト専用イベント（salon.creators-jp.com）

### 7. ログイン（member_login）

| パラメータ | 値 | 用途 |
|------------|-----|------|
| login_method | password, social | ログイン方法 |

### 8. レッスン視聴（lesson_view）

| パラメータ | 値 | 用途 |
|------------|-----|------|
| lesson_id | L001 | レッスンID |
| lesson_title | Premiere Pro基礎 | レッスン名 |
| lesson_category | 入門, 応用 | カテゴリ |
| video_percent | 25, 50, 75, 100 | 視聴進捗 |

### 9. レッスン完了（lesson_complete）

| パラメータ | 値 | 用途 |
|------------|-----|------|
| lesson_id | L001 | レッスンID |
| course_progress | 30 | コース進捗率(%) |

---

## GA4側の設定

### カスタムディメンション登録

GA4管理画面で以下を登録：

| ディメンション名 | スコープ | パラメータ名 |
|------------------|----------|--------------|
| CTA名 | イベント | cta_name |
| CTA配置場所 | イベント | cta_location |
| 動画タイトル | イベント | video_title |
| レッスンID | イベント | lesson_id |
| 記事カテゴリ | イベント | article_category |

### カスタム指標登録

| 指標名 | スコープ | パラメータ名 | 単位 |
|--------|----------|--------------|------|
| 滞在秒数 | イベント | seconds | 秒 |
| 文字数 | イベント | word_count | 標準 |
| 視聴進捗 | イベント | video_percent | % |

---

## 実装優先度

| 優先度 | イベント | 理由 |
|--------|----------|------|
| 高 | scroll_depth | 記事品質の基本指標 |
| 高 | cta_click | コンバージョン分析に必須 |
| 中 | outbound_link | 離脱先の把握 |
| 中 | time_on_page | 精密な滞在時間 |
| 中 | article_read | 読了率分析 |
| 低 | video_engagement | 動画コンテンツがある場合 |

会員サイト:
| 優先度 | イベント | 理由 |
|--------|----------|------|
| 高 | lesson_view | 学習状況の把握 |
| 高 | lesson_complete | 完了率分析 |
| 中 | member_login | アクティブ会員分析 |

---

## 導入後に得られる分析

### 1. 記事パフォーマンス分析

```
記事A:
  PV: 5,000 | 読了率: 75% | CTA率: 3.2%
  → 高品質な記事、CTAも効果的

記事B:
  PV: 8,000 | 読了率: 25% | CTA率: 0.5%
  → PVは多いが途中離脱、改善必要
```

### 2. コンバージョン導線分析

```
無料相談CTA:
  ヘッダー: 50クリック（CTR 0.5%）
  記事末尾: 150クリック（CTR 2.1%）
  → 記事末尾の方が効果的
```

### 3. 会員学習分析

```
コース完了率:
  入門コース: 85%
  応用コース: 45%
  → 応用コースに課題あり
```

---

## 改訂履歴

| 日付 | 内容 |
|------|------|
| 2026/01/11 | 初版作成 |

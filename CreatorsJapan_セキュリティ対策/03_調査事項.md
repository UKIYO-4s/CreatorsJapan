# 調査事項

## 1. スパム侵入経路の特定

### 調査対象

会員制サイト（salon.creators-jp.com）に外部からスパムが投稿された経路

### 調査方法

| 調査項目 | 方法 | 必要なもの |
|----------|------|-----------|
| アクセスログ解析 | スパム投稿時刻のPOSTリクエスト確認 | サーバーログ |
| REST API確認 | `/wp-json/wp/v2/comments` の公開状態 | ブラウザ / curl |
| XMLRPC確認 | xmlrpc.php の有効/無効 | FTPアクセス |
| 会員制プラグイン | 保護範囲の設定確認 | 管理者権限 |

### 確認コマンド例

```bash
# REST API コメントエンドポイント確認
curl -I https://salon.creators-jp.com/wp-json/wp/v2/comments

# XMLRPC 確認
curl -I https://salon.creators-jp.com/xmlrpc.php
```

### 予想される原因

1. **REST API露出** - 最も可能性が高い
   - 会員制プラグインがREST APIを保護していない
   - コメントPOSTエンドポイントが公開されている

2. **wp-comments-post.php 直接攻撃**
   - 記事IDとフォームデータを直接POST
   - リファラーチェックがない場合に成功

3. **会員制プラグインのバイパス**
   - 特定のURLパターンが保護対象外
   - キャッシュにより保護が無効化

---

## 2. 使用中プラグインの確認

### salon.creators-jp.com

現時点で確認できた情報：
- テーマ: SWELL
- 会員制プラグイン: **未確認（要調査）**

### creators-jp.com

確認済みの有効プラグイン（12個）：
- All in One SEO
- All-in-One WP Migration
- Akismet（未設定）
- BackWPup
- Broken Link Checker
- Converter for Media
- LLMs.txt
- MonsterInsights
- OptinMonster
- PS Auto Sitemap
- SEO PACK
- WP Headers and Footers

### 調査が必要なプラグイン

| プラグイン | 調査内容 |
|-----------|----------|
| ProfilePress | 使用予定があるか？会員機能として必要か？ |
| User Role Editor | 権限カスタマイズに使用しているか？ |
| カスタム Twitter フィード | サイトでTwitterフィードを表示しているか？ |
| TypeSquare Webfonts | Webフォントを使用しているか？ |

---

## 3. サーバー環境の確認

### 確認項目

| 項目 | 方法 |
|------|------|
| サーバー会社 | サーバーパネル確認 |
| 2サイトの関係 | 同一サーバー/別サーバー |
| PHP バージョン | サーバーパネル |
| WAF設定 | サーバーパネル |
| SSL証明書 | サーバーパネル |

### エックスサーバーの場合

TypeSquare Webfontsプラグインの存在から、エックスサーバーの可能性が高い。

エックスサーバーで確認できる項目：
- WAF設定（ON/OFF）
- アクセスログ
- エラーログ
- PHP設定
- .htaccess

---

## 4. 同業他社・類似事例の調査

### 調査目的

同様のスパム被害事例と対策を調査し、効果的な対策を選定

### 調査キーワード

- WordPress 会員制サイト スパム
- WordPress REST API スパム対策
- WordPress コメントスパム 侵入経路

---

## 5. 技術的確認事項

### REST API

```
GET /wp-json/wp/v2/comments - コメント一覧取得
POST /wp-json/wp/v2/comments - コメント投稿
```

認証なしでPOSTできる場合、スパムの原因となる。

### XMLRPC

xmlrpc.phpが有効な場合、以下の攻撃が可能：
- ブルートフォース攻撃
- DDoS増幅攻撃
- コメントスパム

### 確認すべきファイル

| ファイル | 確認内容 |
|----------|----------|
| .htaccess | セキュリティ設定の有無 |
| wp-config.php | 定数設定の確認 |
| functions.php | カスタムセキュリティ処理 |

---

## 6. 未解決の疑問

1. salon側で使用している会員制プラグインは何か？
2. 2サイトは同じサーバーか？
3. バックアップはどのように取得しているか？
4. 過去にもスパム被害はあったか？
5. クライアントはどのレベルまで対応を望んでいるか？
